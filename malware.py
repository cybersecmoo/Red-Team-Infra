import ssh_client as client
import ssh_server as server
import threading
import queue
import time


def main():
    commands = queue.Queue()
    server_thread = server.ServerThread(commands)
    client_thread = client.ClientThread(commands)

    server_thread.start()
    client_thread.start()

    commands.put("OPEN_TUNNEL")
    commands.put("9090")
    time.sleep(2)

    try:
        while True:
            command = input("Command: ")
            commands.put(command)
    except KeyboardInterrupt:
        commands.put("CLOSE_TUNNEL")
        client_thread.join()
        server_thread.join()

if __name__ == "__main__":
    main()